{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./resources/modules/editor/src/js/components/widgets/InputTextCommonWidget.js","webpack:///./resources/modules/editor/src/js/components/widgets/InputTextWidget.js","webpack:///./node_modules/dot-prop-immutable/lib/index.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithHoles","isArray","_assertThisInitialized","self","ReferenceError","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_get","target","property","receiver","Reflect","get","base","object","prototype","hasOwnProperty","call","getPrototypeOf","desc","getOwnPropertyDescriptor","_getPrototypeOf","o","setPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","create","constructor","_iterableToArray","iter","Symbol","iterator","from","_nonIterableRest","_possibleConstructorReturn","_setPrototypeOf","p","_slicedToArray","arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","push","err","unsupportedIterableToArray","nonIterableRest","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","_toArray","_toConsumableArray","arrayLikeToArray","iterableToArray","_typeof","_unsupportedIterableToArray","minLen","n","toString","name","test","window","altrpHelpers","isEditor","replaceContentWithData","renderAsset","getDataFromLocalStorage","globalDefaults","AltrpFieldContainer","styled","div","settings","content_label_position_type","InputTextCommonWidget","props","timeInput","handleEnter","e","keyCode","preventDefault","inputs","document","querySelectorAll","index","indexOf","undefined","focus","element","getSettings","create_allowed","create_label","create_url","createItem","getValue","formId","getFormId","fieldName","getFieldId","state","_","appStore","getState","debounceDispatch","debounce","dispatchFieldValueToStore","onFocus","focus_actions","actionsManager","default","callAllWidgetActions","getIdForAction","onBlur","editor","getData","userInput","isObject","dispatch","changeFormFieldValue","change_actions","handleLockClick","setState","showPassword","component","elementDecorator","onChange","bind","defaultValue","getContent","popoverProps","usePortal","portalClassName","getId","portalContainer","EditorFrame","contentWindow","body","altrpSelectRef","React","createRef","this","prevProps","prevState","currentModel","getProperty","contentLoaded","currentDataStorage","isEqual","dynamic","updateValue","content_calculation","altrpforms","formsStore","prevContext","altrpdata","altrpmodel","altrpuser","currentUser","altrppagestate","altrpPageState","altrpresponses","altrpmeta","altrpMeta","context","getCurrentModel","currentDataStorageLoaded","changedField","altrpstorage","replace","eval","console","error","message","path","change_change_end","change_change_end_delay","clearTimeout","setTimeout","left_icon","getResponsiveSetting","password_show_left_icon","content_type","leftIconProps","onClick","style","cursor","className","tabIndex","right_icon","password_show_right_icon","rightIconProps","label","content_readonly","label_icon","classLabel","styleLabel","label_icon_position","label_style_spacing","marginBottom","size","unit","marginTop","marginRight","position","zIndex","content_label","htmlFor","getName","display","flexDirection","content_required","type","autocomplete","content_autocomplete","input","id","readOnly","autoComplete","placeholder","content_placeholder","onKeyDown","leftIcon","renderLeftIcon","rightElement","renderRightIcon","Component","moment","InputTextWidget","inputValue","create_data","select2_multiple","data","parseParamsFromString","url","parseURLTemplate","isDisabled","resource","Resource","route","post","res","success","newOption","options","unshift","selectStateManager","menuIsOpen","parseOptionsFromSettings","paramsForUpdate","content_options","model_for_options","updateOptions","formData","AltrpModel","isEmpty","JSON","stringify","getRoute","getQueried","filters","getAll","valueToDispatch","cloneDeep","optionsDynamicSetting","getDynamicSetting","convertData","sortBy","assetType","renderAssetIcon","isClearable","content_clearable","position_css_classes","position_css_id","set","prop","propToArray","setPropImmutableRec","clone","head","getArrayIndex","assign","Math","max","Error","parseInt","split","reduce","ret","el","list","last","prev","pop","module","exports","delete","deletePropImmutableRec","concat","toggle","curVal","Boolean","merge","val"],"mappings":"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","file":"InputTextCommonWidget.a5d397e46b9b2f425a09.bundle.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","const {\r\n  isEditor,\r\n  replaceContentWithData,\r\n  renderAsset,\r\n  getDataFromLocalStorage,\r\n} = window.altrpHelpers;\r\nimport {changeFormFieldValue} from \"../../../../../front-app/src/js/store/forms-data-storage/actions\";\r\nimport AltrpInput from \"../altrp-input/AltrpInput\";\r\n\r\n\r\n(window.globalDefaults = window.globalDefaults || []).push(`\r\n.altrp-field-label_text-widget{\r\n    width: 100%;\r\n}\r\n.bp3-icon_text-widget img{\r\n  width: 16px;\r\n  height: 16px;\r\n  object-fit: contain;\r\n  pointer-events: none;\r\n}\r\n.bp3-icon_text-widget svg{\r\n  width: 16px;\r\n  height: 16px;\r\n  pointer-events: none;\r\n}\r\n.bp3-icon_right{\r\n    margin: 7px;\r\n}\r\n.altrp-field {\r\n  border-style: solid;\r\n  width: 100%;\r\n}\r\n.altrp-field-file{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.altrp-label-icon svg,\r\n.altrp-label-icon img {\r\n  width: 20px;\r\n}\r\n.altrp-label-icon svg{\r\n  height: 20px;\r\n}\r\n.altrp-field-file__field{\r\n  display: none;\r\n}\r\n.altrp-field-file__placeholder{\r\n  display: none;\r\n}\r\n.altrp-field-file_empty .altrp-field-file__placeholder{\r\n  display: block;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  cursor: pointer;\r\n  background-color: rgb(52,59,76);\r\n  color: #fff;\r\n}\r\n.input-clear-btn {\r\n  background: transparent;\r\n  padding: 0;\r\n  position: absolute;\r\n  bottom: calc(50% - 7px);\r\n  right: 15px;\r\n  display: none;\r\n}\r\n.input-clear-btn:hover {\r\n  font-weight: bold;\r\n}\r\n.altrp-field:hover + .input-clear-btn, .input-clear-btn:hover {\r\n  display: block;\r\n}\r\n.altrp-input-wrapper, .altrp-field-select2 {\r\n  position: relative;\r\n  flex-grow: 1;\r\n}\r\n.altrp-field-label--required::after {\r\n  content: \"*\";\r\n  color: red;\r\n  font-size: inherit;\r\n  padding-left: 10px;\r\n}\r\n.altrp-field-label {\r\n  font-size: 16px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-field-select2__single-value, .altrp-field {\r\n  font-size: 16px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-field-select2__control, .altrp-field {\r\n  text-align: left;\r\n  padding-top: 2px;\r\n  padding-right: 2px;\r\n  padding-bottom: 2px;\r\n  padding-left: 2px;\r\n  border-width: 1px;\r\n  border-color: #000;\r\n}\r\n.altrp-field-select2__control:hover{\r\n  border-width: 1px;\r\n  border-color: #000;\r\n}\r\n.altrp-field-container {\r\n  margin: 0;\r\n}\r\n.altrp-field::placeholder, .altrp-field-select2__placeholder {\r\n  font-size: 13px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-image-select {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n.altrp-image-select img {\r\n  flex-grow: 1;\r\n  object-fit: contain;\r\n}\r\n.altrp-field {\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n.altrp-field.active {\r\n  border-color: lightcoral;\r\n}\r\n.altrp-field-label {\r\n  text-align: center;\r\n  display: block;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__single-value {\r\n  font-size: 14px;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__indicator-separator {\r\n  display: none;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__indicator {\r\n  align-items: center;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__control {\r\n  width: 100px;\r\n  min-height: 32px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  outline: none;\r\n  border-color: rgb(142,148,170);\r\n  -webkit-box-shadow: none;\r\n  -moz-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__control input {\r\n  border: none;\r\n}\r\n.altrp-field-select2 {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  pointer-events: none;\r\n}\r\n.altrp-field-select2__control {\r\n  webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  background-color: hsl(0,0%,100%);\r\n  border-color: hsl(0,0%,80%);\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  cursor: default;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex-wrap: wrap;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\r\n  -webkit-box-pack: justify;\r\n  -webkit-justify-content: space-between;\r\n  -ms-flex-pack: justify;\r\n  justify-content: space-between;\r\n  min-height: 38px;\r\n  outline: 0 !important;\r\n  position: relative;\r\n  -webkit-transition: all 100ms;\r\n  transition: all 100ms;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__value-container {\r\n  -webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex: 1;\r\n  -ms-flex: 1;\r\n  flex: 1;\r\n  -webkit-flex-wrap: wrap;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\r\n  padding: 2px 8px;\r\n  -webkit-overflow-scrolling: touch;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__single-value {\r\n  color: hsl(0,0%,20%);\r\n  margin-left: 2px;\r\n  margin-right: 2px;\r\n  max-width: calc(100% - 8px);\r\n  overflow: hidden;\r\n  position: absolute;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  top: 50%;\r\n  -webkit-transform: translateY(-50%);\r\n  -ms-transform: translateY(-50%);\r\n  transform: translateY(-50%);\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicators {\r\n  -webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-align-self: stretch;\r\n  -ms-flex-item-align: stretch;\r\n  align-self: stretch;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex-shrink: 0;\r\n  -ms-flex-negative: 0;\r\n  flex-shrink: 0;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicator-separator {\r\n  -webkit-align-self: stretch;\r\n  -ms-flex-item-align: stretch;\r\n  align-self: stretch;\r\n  background-color: hsl(0,0%,80%);\r\n  margin-bottom: 8px;\r\n  margin-top: 8px;\r\n  width: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicator {\r\n  color: hsl(0,0%,80%);\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  padding: 8px;\r\n  -webkit-transition: color 150ms;\r\n  transition: color 150ms;\r\n  box-sizing: border-box;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.tba-placeholder {\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n.altrp-field-subgroup {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.altrp-field-option {\r\n  display: flex;\r\n  padding: 10px;\r\n}\r\n.altrp-field-option__label {\r\n  cursor: pointer;\r\n}\r\ntextarea.altrp-field {\r\n  display: block;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__placeholder {\r\n  white-space: nowrap;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__single-value {\r\n  font-size: 14px;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__indicator-separator {\r\n  display: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__indicator {\r\n  align-items: center;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__control {\r\n  width: 100%;\r\n  min-height: 19px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  outline: none;\r\n  border-color: rgb(142, 148, 170);\r\n  -webkit-box-shadow: none;\r\n  -moz-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__control input {\r\n  border: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__value-container {\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  line-height: 13px;\r\n}\r\n.altrp-field-required {\r\n  color: red;\r\n  font-size: 18px;\r\n  padding-left: 10px;\r\n}\r\n.altrp-field-container-label {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.altrp-field-label-container-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.altrp-field-label-container {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n.altrp-field-select2__indicator.altrp-field-select2__dropdown-indicator {\r\n  padding: 0 8px;\r\n  max-height: 14px;\r\n  overflow: hidden;\r\n}\r\n.altrp-field-select2 .altrp-field-select2__value-container {\r\n  padding: 0px 8px;\r\n}\r\n.altrp-field-select2 .css-b8ldur-Input {\r\n  padding-bottom: 0px;\r\n  padding-top: 0px;\r\n  margin: 0 2px;\r\n}\r\n.altrp-field-select2 .altrp-field-select2__control {\r\n  min-height: 14px;\r\n}\r\n`)\r\n\r\nconst AltrpFieldContainer = styled.div`\r\n  ${({settings: {content_label_position_type}}) => {\r\n  switch (content_label_position_type) {\r\n    case \"left\": {\r\n      return \"display: flex\";\r\n    }\r\n    case \"right\": {\r\n      return \"display:flex;flex-direction:row-reverse;justify-content:flex-end;\";\r\n    }\r\n  }\r\n  return \"\";\r\n}}\r\n`;\r\n\r\nclass InputTextCommonWidget extends Component {\r\n  timeInput = null;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    props.element.component = this;\r\n    if (window.elementDecorator) {\r\n      window.elementDecorator(this);\r\n    }\r\n    this.onChange = this.onChange.bind(this);\r\n    this.debounceDispatch = this.debounceDispatch.bind(this);\r\n\r\n    this.defaultValue = this.getContent(\"content_default_value\")\r\n\r\n    this.state = {\r\n      settings: {...props.element.getSettings()},\r\n      showPassword: false,\r\n    };\r\n    this.popoverProps = {\r\n      usePortal: true,\r\n      // isOpen:true ,\r\n      portalClassName: `altrp-portal altrp-portal${this.props.element.getId()}`,\r\n      portalContainer: window.EditorFrame ? window.EditorFrame.contentWindow.document.body : document.body,\r\n    };\r\n    this.altrpSelectRef = React.createRef();\r\n    if (this.getContent(\"content_default_value\")) {\r\n      this.dispatchFieldValueToStore(this.getContent(\"content_default_value\"));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Чистит значение\r\n   */\r\n  clearValue() {\r\n    let value = \"\";\r\n    this.onChange(value);\r\n    this.dispatchFieldValueToStore(value, true);\r\n  }\r\n\r\n  /**\r\n   * Обработка нажатия клавиши\r\n   * @param {{}} e\r\n   */\r\n  handleEnter = e => {\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n      const inputs = Array.from(document.querySelectorAll(\"input,select\"));\r\n      const index = inputs.indexOf(e.target);\r\n      if (index === undefined) return;\r\n      inputs[index + 1] && inputs[index + 1].focus();\r\n      const {\r\n        create_allowed,\r\n        create_label,\r\n        create_url\r\n      } = this.props.element.getSettings();\r\n      if (create_allowed && create_label && create_url) {\r\n        this.createItem(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Загрузка виджета\r\n   * @param {{}} prevProps\r\n   * @param {{}} prevState\r\n   */\r\n  async _componentDidMount(prevProps, prevState) {\r\n\r\n    let value = this.getValue();\r\n\r\n    /**\r\n     * Если модель обновилась при смене URL\r\n     */\r\n    if (\r\n      prevProps &&\r\n      !prevProps.currentModel.getProperty(\"altrpModelUpdated\") &&\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\")\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n      this.setState(\r\n        state => ({...state, contentLoaded: true}),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n    if (\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\") &&\r\n      this.props.currentDataStorage.getProperty(\"currentDataStorageLoaded\") &&\r\n      !this.state.contentLoaded\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n      this.setState(\r\n        state => ({...state, contentLoaded: true}),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  getValue = () => {\r\n    let value;\r\n    let formId = this.props.element.getFormId();\r\n    let fieldName = this.props.element.getFieldId();\r\n    if (isEditor()) {\r\n      value = this.state.value;\r\n    } else {\r\n      value = _.get(appStore.getState(), `formsStore.${formId}.${fieldName}`, '')\r\n    }\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * Обновление виджета\r\n   */\r\n  async _componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps &&\r\n      !prevProps.currentDataStorage.getProperty(\"currentDataStorageLoaded\") &&\r\n      this.props.currentDataStorage.getProperty(\"currentDataStorageLoaded\")\r\n    ) {\r\n      let value = this.getContent(\r\n        \"content_default_value\",\r\n        this.props.element.getSettings(\"select2_multiple\")\r\n      );\r\n      this.setState(\r\n        state => ({...state, contentLoaded: true}),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n    }\r\n\r\n    /**\r\n     * Если обновилась модель, то пробрасываем в стор новое значение (старый источник диамических данных)\r\n     */\r\n    if (\r\n      !_.isEqual(this.props.currentModel, prevProps.currentModel) &&\r\n      this.state.value &&\r\n      this.state.value.dynamic\r\n    ) {\r\n      this.dispatchFieldValueToStore(this.getContent(\"content_default_value\"));\r\n    }\r\n\r\n    this.updateValue(prevProps);\r\n  }\r\n\r\n  /**\r\n   * Обновить значение если нужно\r\n   * @param {{}} prevProps\r\n   */\r\n  updateValue(prevProps) {\r\n    if (isEditor()) {\r\n      return;\r\n    }\r\n    let content_calculation = this.props.element.getSettings(\r\n      \"content_calculation\"\r\n    );\r\n    const altrpforms = this.props.formsStore;\r\n    const fieldName = this.props.element.getFieldId();\r\n    const formId = this.props.element.getFormId();\r\n    if (!content_calculation) {\r\n      /**\r\n       * Обновить значение, если formsStore изменилось из другого компонента\r\n       */\r\n      const path = `${formId}.${fieldName}`;\r\n      if (\r\n        this.props.formsStore !== prevProps.formsStore &&\r\n        _.get(altrpforms, path) !== this.state.value\r\n      ) {\r\n        this.setState(state => ({\r\n          ...state,\r\n          value: _.get(altrpforms, path)\r\n        }));\r\n      }\r\n      return;\r\n    }\r\n\r\n    const prevContext = {};\r\n\r\n    const altrpdata = this.props.currentDataStorage.getData();\r\n    const altrpmodel = this.props.currentModel.getData();\r\n    const altrpuser = this.props.currentUser.getData();\r\n    const altrppagestate = this.props.altrpPageState.getData();\r\n    const altrpresponses = this.props.altrpresponses.getData();\r\n    const altrpmeta = this.props.altrpMeta.getData();\r\n    const context = this.props.element.getCurrentModel().getData();\r\n    if (content_calculation.indexOf(\"altrpdata\") !== -1) {\r\n      context.altrpdata = altrpdata;\r\n      if (!altrpdata.currentDataStorageLoaded) {\r\n        prevContext.altrpdata = altrpdata;\r\n      } else {\r\n        prevContext.altrpdata = prevProps.currentDataStorage.getData();\r\n      }\r\n    }\r\n    if (content_calculation.indexOf(\"altrpforms\") !== -1) {\r\n      context.altrpforms = altrpforms;\r\n      /**\r\n       * Не производим вычисления, если изменилось текущее поле\r\n       */\r\n      if (`${formId}.${fieldName}` === altrpforms.changedField) {\r\n        prevContext.altrpforms = altrpforms;\r\n      } else {\r\n        prevContext.altrpforms = prevProps.formsStore;\r\n      }\r\n    }\r\n    if (content_calculation.indexOf(\"altrpmodel\") !== -1) {\r\n      context.altrpmodel = altrpmodel;\r\n      prevContext.altrpmodel = prevProps.currentModel.getData();\r\n    }\r\n    if (content_calculation.indexOf(\"altrpuser\") !== -1) {\r\n      context.altrpuser = altrpuser;\r\n      prevContext.altrpuser = prevProps.currentUser.getData();\r\n    }\r\n    if (content_calculation.indexOf(\"altrpuser\") !== -1) {\r\n      context.altrpuser = altrpuser;\r\n      prevContext.altrpuser = prevProps.currentUser.getData();\r\n    }\r\n    if (content_calculation.indexOf(\"altrppagestate\") !== -1) {\r\n      context.altrppagestate = altrppagestate;\r\n      prevContext.altrppagestate = prevProps.altrpPageState.getData();\r\n    }\r\n    if (content_calculation.indexOf(\"altrpmeta\") !== -1) {\r\n      context.altrpmeta = altrpmeta;\r\n      prevContext.altrpmeta = prevProps.altrpMeta.getData();\r\n    }\r\n    if (content_calculation.indexOf(\"altrpresponses\") !== -1) {\r\n      context.altrpresponses = altrpresponses;\r\n      prevContext.altrpresponses = prevProps.altrpresponses.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpstorage\") !== -1) {\r\n      context.altrpstorage = getDataFromLocalStorage(\"altrpstorage\", {});\r\n    }\r\n\r\n    if (\r\n      _.isEqual(prevProps.currentDataStorage, this.props.currentDataStorage) &&\r\n      _.isEqual(prevProps.currentUser, this.props.currentUser) &&\r\n      _.isEqual(prevProps.formsStore, this.props.formsStore) &&\r\n      _.isEqual(prevProps.altrpPageState, this.props.altrpPageState) &&\r\n      _.isEqual(prevProps.altrpMeta, this.props.altrpMeta) &&\r\n      _.isEqual(prevProps.altrpresponses, this.props.altrpresponses) &&\r\n      _.isEqual(prevProps.currentModel, this.props.currentModel)\r\n    ) {\r\n      return;\r\n    }\r\n    if (\r\n      !_.isEqual(prevProps.formsStore, this.props.formsStore) &&\r\n      `${formId}.${fieldName}` === altrpforms.changedField\r\n    ) {\r\n      return;\r\n    }\r\n    let value = \"\";\r\n    try {\r\n      content_calculation = content_calculation\r\n        .replace(/}}/g, \"')\")\r\n        .replace(/{{/g, \"_.get(context, '\");\r\n      value = eval(content_calculation);\r\n      if (value === this.state.value) {\r\n        return;\r\n      }\r\n      this.setState(\r\n        state => ({...state, value}),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n    } catch (e) {\r\n      console.error(\r\n        \"Evaluate error in Input \" + e.message,\r\n        this.props.element.getId()\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Изменение значения в виджете\r\n   * @param e\r\n   */\r\n  onChange(e) {\r\n    let value = \"\";\r\n    if (e && e.target) {\r\n      value = e.target.value;\r\n    }\r\n\r\n    if (e && e.value) {\r\n      value = e.value;\r\n    }\r\n\r\n\r\n    /**\r\n     * Обновляем хранилище только если не текстовое поле\r\n     */\r\n\r\n    const change_actions = this.props.element.getSettings(\"change_actions\");\r\n    const change_change_end = this.props.element.getSettings(\r\n      \"change_change_end\"\r\n    );\r\n    const change_change_end_delay = this.props.element.getSettings(\r\n      \"change_change_end_delay\"\r\n    );\r\n\r\n    if (change_actions && !change_change_end && !isEditor()) {\r\n      this.debounceDispatch(\r\n        value !== undefined ? value : value\r\n      );\r\n    }\r\n    if (change_actions && change_change_end && !isEditor()) {\r\n      this.timeInput && clearTimeout(this.timeInput);\r\n      this.timeInput = setTimeout(() => {\r\n        this.debounceDispatch(\r\n          value !== undefined ? value : value\r\n        );\r\n      }, change_change_end_delay);\r\n    }\r\n    if(isEditor()){\r\n      this.setState(state=>({...state, value}))\r\n    } else {\r\n      this.dispatchFieldValueToStore(value, true)\r\n    }\r\n  }\r\n\r\n  debounceDispatch = _.debounce(\r\n    value => this.dispatchFieldValueToStore(value, true),\r\n    150\r\n  );\r\n\r\n\r\n  /**\r\n   * Для действие по фокусу\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n\r\n  onFocus = async e => {\r\n    const focus_actions = this.props.element.getSettings(\"focus_actions\");\r\n\r\n    if (focus_actions && !isEditor()) {\r\n      const actionsManager = (\r\n        await import(\r\n          /* webpackChunkName: 'ActionsManager' */\r\n          \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n          )\r\n      ).default;\r\n      await actionsManager.callAllWidgetActions(\r\n        this.props.element.getIdForAction(),\r\n        \"focus\",\r\n        focus_actions,\r\n        this.props.element\r\n      );\r\n    }\r\n  };\r\n  /**\r\n   * Потеря фокуса для оптимизации\r\n   * @param  e\r\n   * @param  editor для получения изменений из CKEditor\r\n   */\r\n  onBlur = async (e, editor = null) => {\r\n    this.dispatchFieldValueToStore(e.target.value, true);\r\n\r\n    if (_.get(editor, \"getData\")) {\r\n      this.dispatchFieldValueToStore(editor.getData(), true);\r\n    }\r\n    if (this.props.element.getSettings(\"actions\", []) && !isEditor()) {\r\n      const actionsManager = (\r\n        await import(\r\n          /* webpackChunkName: 'ActionsManager' */\r\n          \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n          )\r\n      ).default;\r\n      await actionsManager.callAllWidgetActions(\r\n        this.props.element.getIdForAction(),\r\n        \"blur\",\r\n        this.props.element.getSettings(\"actions\", []),\r\n        this.props.element\r\n      );\r\n    }\r\n  };\r\n  /**\r\n   * Передадим значение в хранилище формы\r\n   * @param {*} value\r\n   * @param {boolean} userInput true - имзенилось пользователем\r\n   */\r\n  dispatchFieldValueToStore = async (value, userInput = false) => {\r\n    let formId = this.props.element.getFormId();\r\n    let fieldName = this.props.element.getFieldId();\r\n    if (fieldName.indexOf(\"{{\") !== -1) {\r\n      fieldName = replaceContentWithData(fieldName);\r\n    }\r\n    if (_.isObject(this.props.appStore) && fieldName && formId) {\r\n      this.props.appStore.dispatch(\r\n        changeFormFieldValue(fieldName, value, formId, userInput)\r\n      );\r\n      if (userInput) {\r\n        const change_actions = this.props.element.getSettings(\"change_actions\");\r\n\r\n        if (change_actions && !isEditor()) {\r\n          const actionsManager = (\r\n            await import(\r\n              /* webpackChunkName: 'ActionsManager' */\r\n              \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n              )\r\n          ).default;\r\n          await actionsManager.callAllWidgetActions(\r\n            this.props.element.getIdForAction(),\r\n            \"change\",\r\n            change_actions,\r\n            this.props.element\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Взовращает имя для атрибута name\r\n   * @return {string}\r\n   */\r\n  getName() {\r\n    return `${this.props.element.getFormId()}[${this.props.element.getFieldId()}]`;\r\n  }\r\n\r\n  handleLockClick = () => {\r\n    this.setState((state) => {\r\n      return {\r\n        ...state,\r\n        showPassword: !state.showPassword,\r\n      }\r\n    })\r\n  }\r\n\r\n  renderLeftIcon(){\r\n    const {element} = this.props;\r\n    let left_icon = element.getResponsiveSetting('left_icon');\r\n    let password_show_left_icon = element.getResponsiveSetting('password_show_left_icon');\r\n    const {content_type} = element.settings\r\n    const leftIconProps = {}\r\n    if(content_type === 'password' && this.state.showPassword && password_show_left_icon){\r\n      left_icon = password_show_left_icon\r\n      leftIconProps.onClick = this.handleLockClick\r\n    }\r\n    if(content_type === 'password' && password_show_left_icon){\r\n      leftIconProps.onClick = this.handleLockClick\r\n      leftIconProps.style = {\r\n        cursor: 'pointer'\r\n      }\r\n    }\r\n    if(!left_icon){\r\n      return null\r\n    }\r\n    return <span className=\"bp3-icon bp3-icon_text-widget bp3-icon_left\" {...leftIconProps} tabIndex=\"0\">\r\n      {renderAsset(left_icon, )}\r\n    </span>\r\n  }\r\n  renderRightIcon(){\r\n    const {element} = this.props;\r\n    let right_icon = element.getResponsiveSetting('right_icon');\r\n    let password_show_right_icon = element.getResponsiveSetting('password_show_right_icon');\r\n    const {content_type} = element.settings\r\n    const rightIconProps = {}\r\n    if(content_type === 'password' && this.state.showPassword && password_show_right_icon){\r\n      right_icon = password_show_right_icon\r\n    }\r\n    if(content_type === 'password' && password_show_right_icon){\r\n      rightIconProps.onClick = this.handleLockClick\r\n      rightIconProps.style = {\r\n        cursor: 'pointer'\r\n      }\r\n    }\r\n    if(!right_icon){\r\n      return null\r\n    }\r\n    return <span className=\"bp3-icon bp3-icon_text-widget bp3-icon_right\" {...rightIconProps} tabIndex=\"0\">\r\n      {renderAsset(right_icon, )}\r\n    </span>\r\n  }\r\n\r\n  render() {\r\n    let label = null;\r\n    const settings = this.props.element.getSettings();\r\n    const {\r\n      content_readonly,\r\n      label_icon\r\n    } = settings;\r\n    let value = this.getValue()\r\n\r\n    let classLabel = \"\";\r\n    let styleLabel = {};\r\n    const content_label_position_type = this.props.element.getResponsiveSetting(\r\n      \"content_label_position_type\"\r\n    );\r\n    const label_icon_position = this.props.element.getResponsiveSetting('label_icon_position')\r\n    let label_style_spacing = this.props.element.getResponsiveSetting('label_style_spacing')\r\n    switch (content_label_position_type) {\r\n      case \"top\":\r\n        styleLabel = {\r\n          marginBottom: label_style_spacing\r\n            ? label_style_spacing?.size +\r\n            label_style_spacing?.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n      case \"bottom\":\r\n        styleLabel = {\r\n          marginTop: label_style_spacing\r\n            ? label_style_spacing?.size +\r\n            label_style_spacing?.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n      case \"left\":\r\n        styleLabel = {\r\n          marginRight: label_style_spacing\r\n            ? label_style_spacing?.size +\r\n            label_style_spacing?.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"altrp-field-label-container-left\";\r\n        break;\r\n      case \"absolute\":\r\n        styleLabel = {\r\n          position: \"absolute\",\r\n          zIndex: 2\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n    }\r\n\r\n    if (this.state.settings.content_label || label_icon ) {\r\n      label = (\r\n        <div\r\n          className={\"altrp-field-label-container \" + classLabel}\r\n          style={styleLabel}\r\n        >\r\n          <label\r\n            htmlFor={this.getName()}\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection: label_icon_position,\r\n            }}\r\n            className={`altrp-field-label altrp-field-label_text-widget ${this.state.settings.content_required\r\n              ? \"altrp-field-label--required\"\r\n              : \"\"\r\n            }`}\r\n          >\r\n            {this.state.settings.content_label}\r\n\r\n            {label_icon && label_icon.type && (\r\n              <span className=\"altrp-label-icon\">\r\n              {renderAsset(label_icon)}\r\n            </span>\r\n            )}\r\n          </label>\r\n        </div>\r\n      );\r\n    } else {\r\n      label = null;\r\n    }\r\n    let autocomplete = \"off\";\r\n    if (this.state.settings.content_autocomplete) {\r\n      autocomplete = \"on\";\r\n    } else {\r\n      autocomplete = \"off\";\r\n    }\r\n\r\n    let input = (\r\n      <div className=\"altrp-input-wrapper\">\r\n        <AltrpInput\r\n          type={this.state.settings.content_type === 'password' ? (this.state.showPassword ? \"text\" : \"password\") : this.state.settings.content_type}\r\n          name={this.getName()}\r\n          id={this.getName()}\r\n          value={value || \"\"}\r\n          popoverProps={this.popoverProps}\r\n          element={this.props.element}\r\n          readOnly={content_readonly}\r\n          autoComplete={autocomplete}\r\n          placeholder={this.state.settings.content_placeholder}\r\n          settings={this.props.element.getSettings()}\r\n          onKeyDown={this.handleEnter}\r\n          onChange={this.onChange}\r\n          onBlur={this.onBlur}\r\n          onFocus={this.onFocus}\r\n          leftIcon={this.renderLeftIcon()}\r\n          rightElement={this.renderRightIcon()}\r\n        />\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <AltrpFieldContainer\r\n        settings={settings}\r\n        className=\"altrp-field-container \"\r\n      >\r\n        {content_label_position_type === \"top\" ? label : \"\"}\r\n        {content_label_position_type === \"left\" ? label : \"\"}\r\n        {content_label_position_type === \"right\" ? label : \"\"}\r\n        {content_label_position_type === \"absolute\" ? label : \"\"}\r\n        {/* .altrp-field-label-container */}\r\n        {input}\r\n        {content_label_position_type === \"bottom\" ? label : \"\"}\r\n      </AltrpFieldContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputTextCommonWidget;\r\n","import {\r\n  convertData,\r\n  isEditor,\r\n  parseOptionsFromSettings,\r\n  parseParamsFromString,\r\n  parseURLTemplate,\r\n  replaceContentWithData,\r\n  renderAssetIcon,\r\n  getDataFromLocalStorage\r\n} from \"../../../../../front-app/src/js/helpers\";\r\nimport Resource from \"../../classes/Resource\";\r\nimport { changeFormFieldValue } from \"../../../../../front-app/src/js/store/forms-data-storage/actions\";\r\nimport AltrpModel from \"../../classes/AltrpModel\";\r\nimport AltrpInput from \"../altrp-input/AltrpInput\";\r\n\r\nconst { moment } = window.altrpHelpers;\r\n(window.globalDefaults = window.globalDefaults || []).push(`\r\n.altrp-field-label_text-widget{\r\n    width: 100%;\r\n}\r\n.bp3-icon_text-widget img{\r\n  width: 16px;\r\n  height: 16px;\r\n  object-fit: contain;\r\n  pointer-events: none;\r\n}\r\n.bp3-icon_text-widget svg{\r\n  width: 16px;\r\n  height: 16px;\r\n  pointer-events: none;\r\n}\r\n.bp3-icon_right{\r\n    margin: 7px;\r\n}\r\n.altrp-field {\r\n  border-style: solid;\r\n  width: 100%;\r\n}\r\n.altrp-field-file{\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.altrp-label-icon svg,\r\n.altrp-label-icon img {\r\n  width: 20px;\r\n}\r\n.altrp-label-icon svg{\r\n  height: 20px;\r\n}\r\n.altrp-field-file__field{\r\n  display: none;\r\n}\r\n.altrp-field-file__placeholder{\r\n  display: none;\r\n}\r\n.altrp-field-file_empty .altrp-field-file__placeholder{\r\n  display: block;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  cursor: pointer;\r\n  background-color: rgb(52,59,76);\r\n  color: #fff;\r\n}\r\n.input-clear-btn {\r\n  background: transparent;\r\n  padding: 0;\r\n  position: absolute;\r\n  bottom: calc(50% - 7px);\r\n  right: 15px;\r\n  display: none;\r\n}\r\n.input-clear-btn:hover {\r\n  font-weight: bold;\r\n}\r\n.altrp-field:hover + .input-clear-btn, .input-clear-btn:hover {\r\n  display: block;\r\n}\r\n.altrp-input-wrapper, .altrp-field-select2 {\r\n  position: relative;\r\n  flex-grow: 1;\r\n}\r\n.altrp-field-label--required::after {\r\n  content: \"*\";\r\n  color: red;\r\n  font-size: inherit;\r\n  padding-left: 10px;\r\n}\r\n.altrp-field-label {\r\n  font-size: 16px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-field-select2__single-value, .altrp-field {\r\n  font-size: 16px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-field-select2__control, .altrp-field {\r\n  text-align: left;\r\n  padding-top: 2px;\r\n  padding-right: 2px;\r\n  padding-bottom: 2px;\r\n  padding-left: 2px;\r\n  border-width: 1px;\r\n  border-color: #000;\r\n}\r\n.altrp-field-select2__control:hover{\r\n  border-width: 1px;\r\n  border-color: #000;\r\n}\r\n.altrp-field-container {\r\n  margin: 0;\r\n}\r\n.altrp-field::placeholder, .altrp-field-select2__placeholder {\r\n  font-size: 13px;\r\n  font-family: \"Open Sans\";\r\n  line-height: 1.5;\r\n  letter-spacing: 0;\r\n}\r\n.altrp-image-select {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n.altrp-image-select img {\r\n  flex-grow: 1;\r\n  object-fit: contain;\r\n}\r\n.altrp-field {\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n.altrp-field.active {\r\n  border-color: lightcoral;\r\n}\r\n.altrp-field-label {\r\n  text-align: center;\r\n  display: block;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__single-value {\r\n  font-size: 14px;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__indicator-separator {\r\n  display: none;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__indicator {\r\n  align-items: center;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__control {\r\n  width: 100px;\r\n  min-height: 32px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  outline: none;\r\n  border-color: rgb(142,148,170);\r\n  -webkit-box-shadow: none;\r\n  -moz-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n.altrp-pagination__select-size .altrp-field-select2__control input {\r\n  border: none;\r\n}\r\n.altrp-field-select2 {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  pointer-events: none;\r\n}\r\n.altrp-field-select2__control {\r\n  webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  background-color: hsl(0,0%,100%);\r\n  border-color: hsl(0,0%,80%);\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  cursor: default;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex-wrap: wrap;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\r\n  -webkit-box-pack: justify;\r\n  -webkit-justify-content: space-between;\r\n  -ms-flex-pack: justify;\r\n  justify-content: space-between;\r\n  min-height: 38px;\r\n  outline: 0 !important;\r\n  position: relative;\r\n  -webkit-transition: all 100ms;\r\n  transition: all 100ms;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__value-container {\r\n  -webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex: 1;\r\n  -ms-flex: 1;\r\n  flex: 1;\r\n  -webkit-flex-wrap: wrap;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\r\n  padding: 2px 8px;\r\n  -webkit-overflow-scrolling: touch;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__single-value {\r\n  color: hsl(0,0%,20%);\r\n  margin-left: 2px;\r\n  margin-right: 2px;\r\n  max-width: calc(100% - 8px);\r\n  overflow: hidden;\r\n  position: absolute;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  top: 50%;\r\n  -webkit-transform: translateY(-50%);\r\n  -ms-transform: translateY(-50%);\r\n  transform: translateY(-50%);\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicators {\r\n  -webkit-align-items: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-align-self: stretch;\r\n  -ms-flex-item-align: stretch;\r\n  align-self: stretch;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-flex-shrink: 0;\r\n  -ms-flex-negative: 0;\r\n  flex-shrink: 0;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicator-separator {\r\n  -webkit-align-self: stretch;\r\n  -ms-flex-item-align: stretch;\r\n  align-self: stretch;\r\n  background-color: hsl(0,0%,80%);\r\n  margin-bottom: 8px;\r\n  margin-top: 8px;\r\n  width: 1px;\r\n  box-sizing: border-box;\r\n}\r\n.altrp-field-select2__indicator {\r\n  color: hsl(0,0%,80%);\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  padding: 8px;\r\n  -webkit-transition: color 150ms;\r\n  transition: color 150ms;\r\n  box-sizing: border-box;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.tba-placeholder {\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n.altrp-field-subgroup {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.altrp-field-option {\r\n  display: flex;\r\n  padding: 10px;\r\n}\r\n.altrp-field-option__label {\r\n  cursor: pointer;\r\n}\r\ntextarea.altrp-field {\r\n  display: block;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__placeholder {\r\n  white-space: nowrap;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__single-value {\r\n  font-size: 14px;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__indicator-separator {\r\n  display: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__indicator {\r\n  align-items: center;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__control {\r\n  width: 100%;\r\n  min-height: 19px;\r\n  padding: 0;\r\n  border-radius: 0;\r\n  outline: none;\r\n  border-color: rgb(142, 148, 170);\r\n  -webkit-box-shadow: none;\r\n  -moz-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__control input {\r\n  border: none;\r\n}\r\n.altrp-table__filter-select .altrp-field-select2__value-container {\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  line-height: 13px;\r\n}\r\n.altrp-field-required {\r\n  color: red;\r\n  font-size: 18px;\r\n  padding-left: 10px;\r\n}\r\n.altrp-field-container-label {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.altrp-field-label-container-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.altrp-field-label-container {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n.altrp-field-select2__indicator.altrp-field-select2__dropdown-indicator {\r\n  padding: 0 8px;\r\n  max-height: 14px;\r\n  overflow: hidden;\r\n}\r\n.altrp-field-select2 .altrp-field-select2__value-container {\r\n  padding: 0px 8px;\r\n}\r\n.altrp-field-select2 .css-b8ldur-Input {\r\n  padding-bottom: 0px;\r\n  padding-top: 0px;\r\n  margin: 0 2px;\r\n}\r\n.altrp-field-select2 .altrp-field-select2__control {\r\n  min-height: 14px;\r\n}\r\n`)\r\n\r\nconst AltrpFieldContainer = styled.div`\r\n  ${({ settings: { content_label_position_type } }) => {\r\n    switch (content_label_position_type) {\r\n      case \"left\": {\r\n        return \"display: flex\";\r\n      }\r\n      case \"right\": {\r\n        return \"display:flex;flex-direction:row-reverse;justify-content:flex-end;\";\r\n      }\r\n    }\r\n    return \"\";\r\n  }}\r\n`;\r\n\r\nclass InputTextWidget extends Component {\r\n  timeInput = null;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    props.element.component = this;\r\n    if (window.elementDecorator) {\r\n      window.elementDecorator(this);\r\n    }\r\n    this.onChange = this.onChange.bind(this);\r\n    this.debounceDispatch = this.debounceDispatch.bind(this);\r\n\r\n    this.defaultValue = this.getContent(\"content_default_value\") || \"\";\r\n    this.state = {\r\n      settings: { ...props.element.getSettings() },\r\n      value: this.defaultValue,\r\n      options: parseOptionsFromSettings(\r\n        props.element.getSettings(\"content_options\")\r\n      ),\r\n      paramsForUpdate: null\r\n    };\r\n    this.altrpSelectRef = React.createRef();\r\n    if (this.getContent(\"content_default_value\")) {\r\n      this.dispatchFieldValueToStore(this.getContent(\"content_default_value\"));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Чистит значение\r\n   */\r\n  clearValue() {\r\n    this.onChange(\"\");\r\n    this.dispatchFieldValueToStore(\"\", true);\r\n  }\r\n\r\n  /**\r\n   * Обработка нажатия клавиши\r\n   * @param {{}} e\r\n   */\r\n  handleEnter = e => {\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n      const inputs = Array.from(document.querySelectorAll(\"input,select\"));\r\n      const index = inputs.indexOf(e.target);\r\n      if (index === undefined) return;\r\n      inputs[index + 1] && inputs[index + 1].focus();\r\n      const {\r\n        create_allowed,\r\n        create_label,\r\n        create_url\r\n      } = this.props.element.getSettings();\r\n      if (create_allowed && create_label && create_url) {\r\n        this.createItem(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Загрузка виджета\r\n   * @param {{}} prevProps\r\n   * @param {{}} prevState\r\n   */\r\n  async _componentDidMount(prevProps, prevState) {\r\n    if (this.props.element.getSettings(\"content_options\")) {\r\n      let options = parseOptionsFromSettings(\r\n        this.props.element.getSettings(\"content_options\")\r\n      );\r\n\r\n      this.setState(state => ({ ...state, options }));\r\n    }\r\n\r\n    let value = this.state.value;\r\n\r\n    /**\r\n     * Если динамическое значение загрузилось,\r\n     * то используем this.getContent для получение этого динамического значения\r\n     * старые динамические данные\r\n     * */\r\n    if (\r\n      _.get(value, \"dynamic\") &&\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\")\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n    }\r\n\r\n    /**\r\n     * Если модель обновилась при смене URL\r\n     */\r\n    if (\r\n      prevProps &&\r\n      !prevProps.currentModel.getProperty(\"altrpModelUpdated\") &&\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\")\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n      this.setState(\r\n        state => ({ ...state, value, contentLoaded: true }),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\") &&\r\n      this.props.currentDataStorage.getProperty(\"currentDataStorageLoaded\") &&\r\n      !this.state.contentLoaded\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n      this.setState(\r\n        state => ({ ...state, value, contentLoaded: true }),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (this.state.value !== value) {\r\n      this.setState(\r\n        state => ({ ...state, value }),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Получить url для запросов\r\n   */\r\n  getRoute() {\r\n    let url = this.props.element.getSettings(\"model_for_options\");\r\n\r\n    if (url.indexOf(\"/\") === -1) {\r\n      return `/ajax/models/${url}_options`;\r\n    }\r\n    if (url.indexOf(\"{{\") !== -1) {\r\n      url = replaceContentWithData(url);\r\n    }\r\n    return url;\r\n  }\r\n\r\n  /**\r\n   * Обновление виджета\r\n   */\r\n  async _componentDidUpdate(prevProps, prevState) {\r\n    const { content_options, model_for_options } = this.state.settings;\r\n\r\n    if (\r\n      prevProps &&\r\n      !prevProps.currentDataStorage.getProperty(\"currentDataStorageLoaded\") &&\r\n      this.props.currentDataStorage.getProperty(\"currentDataStorageLoaded\")\r\n    ) {\r\n      let value = this.getContent(\r\n        \"content_default_value\",\r\n        this.props.element.getSettings(\"select2_multiple\")\r\n      );\r\n      this.setState(\r\n        state => ({ ...state, value, contentLoaded: true }),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n    }\r\n\r\n    /**\r\n     * Если обновилась модель, то пробрасываем в стор новое значение (старый источник диамических данных)\r\n     */\r\n    if (\r\n      !_.isEqual(this.props.currentModel, prevProps.currentModel) &&\r\n      this.state.value &&\r\n      this.state.value.dynamic\r\n    ) {\r\n      this.dispatchFieldValueToStore(this.getContent(\"content_default_value\"));\r\n    }\r\n\r\n    /**\r\n     * Если обновилось хранилище данных формы, currentDataStorage или модель, то получаем новые опции c сервера\r\n     */\r\n    if (\r\n      this.props.formsStore !== prevProps.formsStore ||\r\n      this.props.currentModel !== prevProps.currentModel ||\r\n      this.props.currentDataStorage !== prevProps.currentDataStorage\r\n    ) {\r\n      this.updateOptions();\r\n    }\r\n    if (content_options && !model_for_options) {\r\n      let options = parseOptionsFromSettings(content_options);\r\n      if (!_.isEqual(options, this.state.options)) {\r\n        this.setState(state => ({ ...state, options }));\r\n      }\r\n    }\r\n    this.updateValue(prevProps);\r\n  }\r\n\r\n  /**\r\n   * Обновить значение если нужно\r\n   * @param {{}} prevProps\r\n   */\r\n  updateValue(prevProps) {\r\n\r\n    if (isEditor()) {\r\n      return;\r\n    }\r\n\r\n    let content_calculation = this.props.element.getSettings(\r\n      \"content_calculation\"\r\n    );\r\n    const altrpforms = this.props.formsStore;\r\n    const fieldName = this.props.element.getFieldId();\r\n    const formId = this.props.element.getFormId();\r\n\r\n    if (!content_calculation) {\r\n      /**\r\n       * Обновить значение, если formsStore изменилось из другого компонента\r\n       */\r\n      const path = `${formId}.${fieldName}`;\r\n      if (\r\n        this.props.formsStore !== prevProps.formsStore &&\r\n        _.get(altrpforms, path) !== this.state.value\r\n      ) {\r\n        this.setState(state => ({\r\n          ...state,\r\n          value: _.get(altrpforms, path)\r\n        }));\r\n      }\r\n      return;\r\n    }\r\n\r\n    const prevContext = {};\r\n    const altrpdata = this.props.currentDataStorage.getData();\r\n    const altrpmodel = this.props.currentModel.getData();\r\n    const altrpuser = this.props.currentUser.getData();\r\n    const altrppagestate = this.props.altrpPageState.getData();\r\n    const altrpresponses = this.props.altrpresponses.getData();\r\n    const altrpmeta = this.props.altrpMeta.getData();\r\n    const context = this.props.element.getCurrentModel().getData();\r\n\r\n    if (content_calculation.indexOf(\"altrpdata\") !== -1) {\r\n      context.altrpdata = altrpdata;\r\n      if (!altrpdata.currentDataStorageLoaded) {\r\n        prevContext.altrpdata = altrpdata;\r\n      } else {\r\n        prevContext.altrpdata = prevProps.currentDataStorage.getData();\r\n      }\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpforms\") !== -1) {\r\n      context.altrpforms = altrpforms;\r\n      /**\r\n       * Не производим вычисления, если изменилось текущее поле\r\n       */\r\n      if (`${formId}.${fieldName}` === altrpforms.changedField) {\r\n        prevContext.altrpforms = altrpforms;\r\n      } else {\r\n        prevContext.altrpforms = prevProps.formsStore;\r\n      }\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpmodel\") !== -1) {\r\n      context.altrpmodel = altrpmodel;\r\n      prevContext.altrpmodel = prevProps.currentModel.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpuser\") !== -1) {\r\n      context.altrpuser = altrpuser;\r\n      prevContext.altrpuser = prevProps.currentUser.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpuser\") !== -1) {\r\n      context.altrpuser = altrpuser;\r\n      prevContext.altrpuser = prevProps.currentUser.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrppagestate\") !== -1) {\r\n      context.altrppagestate = altrppagestate;\r\n      prevContext.altrppagestate = prevProps.altrpPageState.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpmeta\") !== -1) {\r\n      context.altrpmeta = altrpmeta;\r\n      prevContext.altrpmeta = prevProps.altrpMeta.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpresponses\") !== -1) {\r\n      context.altrpresponses = altrpresponses;\r\n      prevContext.altrpresponses = prevProps.altrpresponses.getData();\r\n    }\r\n\r\n    if (content_calculation.indexOf(\"altrpstorage\") !== -1) {\r\n      context.altrpstorage = getDataFromLocalStorage(\"altrpstorage\", {});\r\n    }\r\n\r\n    if (\r\n      _.isEqual(prevProps.currentDataStorage, this.props.currentDataStorage) &&\r\n      _.isEqual(prevProps.currentUser, this.props.currentUser) &&\r\n      _.isEqual(prevProps.formsStore, this.props.formsStore) &&\r\n      _.isEqual(prevProps.altrpPageState, this.props.altrpPageState) &&\r\n      _.isEqual(prevProps.altrpMeta, this.props.altrpMeta) &&\r\n      _.isEqual(prevProps.altrpresponses, this.props.altrpresponses) &&\r\n      _.isEqual(prevProps.currentModel, this.props.currentModel)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !_.isEqual(prevProps.formsStore, this.props.formsStore) &&\r\n      `${formId}.${fieldName}` === altrpforms.changedField\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let value = \"\";\r\n\r\n    try {\r\n      content_calculation = content_calculation\r\n        .replace(/}}/g, \"')\")\r\n        .replace(/{{/g, \"_.get(context, '\");\r\n      value = eval(content_calculation);\r\n      if (value === this.state.value) {\r\n        return;\r\n      }\r\n      this.setState(\r\n        state => ({ ...state, value }),\r\n        () => {\r\n          this.dispatchFieldValueToStore(value);\r\n        }\r\n      );\r\n    } catch (e) {\r\n      console.error(\r\n        \"Evaluate error in Input \" + e.message,\r\n        this.props.element.getId()\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Обновляет опции для селекта при обновлении данных, полей формы\r\n   */\r\n  async updateOptions() {\r\n    {\r\n      let formId = this.props.element.getFormId();\r\n      let paramsForUpdate = this.props.element.getSettings(\"params_for_update\");\r\n      let formData = _.get(this.props.formsStore, [formId], {});\r\n      paramsForUpdate = parseParamsFromString(\r\n        paramsForUpdate,\r\n        new AltrpModel(formData)\r\n      );\r\n      /**\r\n       * Сохраняем параметры запроса, и если надо обновляем опции\r\n       */\r\n      let options = [...this.state.options];\r\n\r\n      if (!_.isEqual(paramsForUpdate, this.state.paramsForUpdate)) {\r\n        if (!_.isEmpty(paramsForUpdate)) {\r\n          if (this.props.element.getSettings(\"params_as_filters\", false)) {\r\n            paramsForUpdate = JSON.stringify(paramsForUpdate);\r\n            options = await new Resource({\r\n              route: this.getRoute()\r\n            }).getQueried({ filters: paramsForUpdate });\r\n          } else {\r\n            options = await new Resource({ route: this.getRoute() }).getQueried(\r\n              paramsForUpdate\r\n            );\r\n          }\r\n          options = !_.isArray(options) ? options.data : options;\r\n          options = _.isArray(options) ? options : [];\r\n        } else if (this.state.paramsForUpdate) {\r\n          options = await new Resource({ route: this.getRoute() }).getAll();\r\n          options = !_.isArray(options) ? options.data : options;\r\n          options = _.isArray(options) ? options : [];\r\n        }\r\n\r\n        this.setState(state => ({\r\n          ...state,\r\n          paramsForUpdate,\r\n          options\r\n        }));\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Изменение значения в виджете\r\n   * @param e\r\n   * @param  editor для получения изменений из CKEditor\r\n   */\r\n  onChange(e, editor = null) {\r\n    let value = \"\";\r\n    let valueToDispatch;\r\n\r\n    if (e && e.target) {\r\n      value = e.target.value;\r\n    }\r\n\r\n    if (e && e.value) {\r\n      value = e.value;\r\n    }\r\n\r\n    if (_.get(editor, \"getData\")) {\r\n      value = `<div class=\"ck ck-content\" style=\"width:100%\">${editor.getData()}</div>`;\r\n    }\r\n\r\n    if (_.isArray(e)) {\r\n      value = _.cloneDeep(e);\r\n    }\r\n\r\n    if (\r\n      this.props.element.getSettings(\"content_options_nullable\") &&\r\n      e &&\r\n      e.value === \"<null>\"\r\n    ) {\r\n      value = null;\r\n    }\r\n\r\n    this.setState(\r\n      state => ({\r\n        ...state,\r\n        value\r\n      }),\r\n      () => {\r\n        /**\r\n         * Обновляем хранилище только если не текстовое поле\r\n         */\r\n\r\n        const change_actions = this.props.element.getSettings(\"change_actions\");\r\n        const change_change_end = this.props.element.getSettings(\r\n          \"change_change_end\"\r\n        );\r\n        const change_change_end_delay = this.props.element.getSettings(\r\n          \"change_change_end_delay\"\r\n        );\r\n\r\n        if (change_actions && !change_change_end && !isEditor()) {\r\n          this.debounceDispatch(\r\n            valueToDispatch !== undefined ? valueToDispatch : value\r\n          );\r\n        }\r\n        if (change_actions && change_change_end && !isEditor()) {\r\n          this.timeInput && clearTimeout(this.timeInput);\r\n          this.timeInput = setTimeout(() => {\r\n            this.debounceDispatch(\r\n              valueToDispatch !== undefined ? valueToDispatch : value\r\n            );\r\n          }, change_change_end_delay);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  debounceDispatch = _.debounce(\r\n    value => this.dispatchFieldValueToStore(value, true),\r\n    150\r\n  );\r\n\r\n  /**\r\n   * получить опции\r\n   */\r\n  getOptions() {\r\n    let options = [...this.state.options];\r\n    const optionsDynamicSetting = this.props.element.getDynamicSetting(\r\n      \"content_options\"\r\n    );\r\n\r\n    if (optionsDynamicSetting) {\r\n      options = convertData(optionsDynamicSetting, options);\r\n    }\r\n\r\n    if (!this.props.element.getSettings(\"sort_default\")) {\r\n      options = _.sortBy(options, o => o && (o.label ? o.label.toString() : o));\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  /**\r\n   * Для действие по фокусу\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n\r\n  onFocus = async e => {\r\n    const focus_actions = this.props.element.getSettings(\"focus_actions\");\r\n\r\n    if (focus_actions && !isEditor()) {\r\n      const actionsManager = (\r\n        await import(\r\n          /* webpackChunkName: 'ActionsManager' */\r\n          \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n        )\r\n      ).default;\r\n      await actionsManager.callAllWidgetActions(\r\n        this.props.element.getIdForAction(),\r\n        \"focus\",\r\n        focus_actions,\r\n        this.props.element\r\n      );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Потеря фокуса для оптимизации\r\n   * @param  e\r\n   * @param  editor для получения изменений из CKEditor\r\n   */\r\n\r\n  onBlur = async (e, editor = null) => {\r\n    this.dispatchFieldValueToStore(e.target.value, true);\r\n\r\n    if (_.get(editor, \"getData\")) {\r\n      this.dispatchFieldValueToStore(editor.getData(), true);\r\n    }\r\n\r\n    if (this.props.element.getSettings(\"actions\", []) && !isEditor()) {\r\n      const actionsManager = (\r\n        await import(\r\n          /* webpackChunkName: 'ActionsManager' */\r\n          \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n        )\r\n      ).default;\r\n      await actionsManager.callAllWidgetActions(\r\n        this.props.element.getIdForAction(),\r\n        \"blur\",\r\n        this.props.element.getSettings(\"actions\", []),\r\n        this.props.element\r\n      );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Передадим значение в хранилище формы\r\n   * @param {*} value\r\n   * @param {boolean} userInput true - имзенилось пользователем\r\n   */\r\n  dispatchFieldValueToStore = async (value, userInput = false) => {\r\n    let formId = this.props.element.getFormId();\r\n    let fieldName = this.props.element.getFieldId();\r\n\r\n    if (fieldName.indexOf(\"{{\") !== -1) {\r\n      fieldName = replaceContentWithData(fieldName);\r\n    }\r\n\r\n    if (_.isObject(this.props.appStore) && fieldName && formId) {\r\n      this.props.appStore.dispatch(\r\n        changeFormFieldValue(fieldName, value, formId, userInput)\r\n      );\r\n\r\n      if (userInput) {\r\n        const change_actions = this.props.element.getSettings(\"change_actions\");\r\n\r\n        if (change_actions && !isEditor()) {\r\n          const actionsManager = (\r\n            await import(\r\n              /* webpackChunkName: 'ActionsManager' */\r\n              \"../../../../../front-app/src/js/classes/modules/ActionsManager.js\"\r\n            )\r\n          ).default;\r\n          await actionsManager.callAllWidgetActions(\r\n            this.props.element.getIdForAction(),\r\n            \"change\",\r\n            change_actions,\r\n            this.props.element\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Обработка добавления опции по ajax\r\n   * @param {SyntheticKeyboardEvent} e\r\n   */\r\n  createItem = async e => {\r\n    const keyCode = e.keyCode;\r\n    const { value: inputValue } = e.target;\r\n\r\n    if (keyCode !== 13 || !inputValue) {\r\n      return;\r\n    }\r\n\r\n    const {\r\n      create_url,\r\n      create_label,\r\n      create_data,\r\n      select2_multiple\r\n    } = this.props.element.getSettings();\r\n\r\n    if (!create_label && !create_url) {\r\n      return;\r\n    }\r\n\r\n    const currentModel = this.props.element.getCurrentModel();\r\n    let data = parseParamsFromString(create_data, currentModel, true);\r\n    data[create_label] = inputValue;\r\n    let url = parseURLTemplate(create_url, currentModel.getData());\r\n    this.setState(state => ({ ...state, isDisabled: true }));\r\n\r\n    try {\r\n      const resource = new Resource({\r\n        route: url\r\n      });\r\n      let res = await resource.post(data);\r\n\r\n      if (res.success && _.get(res, \"data.id\")) {\r\n        let newOption = {\r\n          label: inputValue,\r\n          value: _.get(res, \"data.id\")\r\n        };\r\n\r\n        this.setState(\r\n          state => ({ ...state, isDisabled: false }),\r\n          () => {\r\n            let options = [...this.state.options];\r\n            options.unshift(newOption);\r\n            let value = this.state.value;\r\n            if (select2_multiple) {\r\n              value = value ? [...value] : [];\r\n              value.push(_.get(res, \"data.id\"));\r\n            } else {\r\n              value = _.get(res, \"data.id\");\r\n            }\r\n\r\n            this.setState(\r\n              state => ({ ...state, options, value }),\r\n              () => {\r\n                const selectStateManager = _.get(\r\n                  this,\r\n                  \"altrpSelectRef.current.selectRef.current\"\r\n                );\r\n\r\n                if (selectStateManager) {\r\n                  selectStateManager.setState({\r\n                    menuIsOpen: false,\r\n                    inputValue: \"\"\r\n                  });\r\n                }\r\n              }\r\n            );\r\n          }\r\n        );\r\n      }\r\n      this.setState(state => ({ ...state, isDisabled: false }));\r\n    } catch (error) {\r\n      console.error(error);\r\n      this.setState(state => ({ ...state, isDisabled: false }));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Взовращает имя для атрибута name\r\n   * @return {string}\r\n   */\r\n  getName() {\r\n    return `${this.props.element.getFormId()}[${this.props.element.getFieldId()}]`;\r\n  }\r\n\r\n  render() {\r\n    let label = null;\r\n    const settings = this.props.element.getSettings();\r\n    const {\r\n      content_readonly,\r\n      select2_multiple: isMultiple,\r\n      label_icon\r\n    } = settings;\r\n\r\n    let value = this.state.value;\r\n\r\n    if (\r\n      _.get(value, \"dynamic\") &&\r\n      this.props.currentModel.getProperty(\"altrpModelUpdated\")\r\n    ) {\r\n      value = this.getContent(\"content_default_value\");\r\n    }\r\n\r\n    /**\r\n     * Пока динамический контент загружается (Еесли это динамический контент),\r\n     * нужно вывести пустую строку\r\n     */\r\n\r\n    if (value && value.dynamic) {\r\n      value = \"\";\r\n    }\r\n\r\n    let classLabel = \"\";\r\n    let styleLabel = {};\r\n    const content_label_position_type = this.props.element.getResponsiveSetting(\r\n      \"content_label_position_type\"\r\n    );\r\n\r\n    switch (content_label_position_type) {\r\n      case \"top\":\r\n        styleLabel = {\r\n          marginBottom: this.state.settings.label_style_spacing\r\n            ? this.state.settings.label_style_spacing.size +\r\n            this.state.settings.label_style_spacing.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n      case \"bottom\":\r\n        styleLabel = {\r\n          marginTop: this.state.settings.label_style_spacing\r\n            ? this.state.settings.label_style_spacing.size +\r\n            this.state.settings.label_style_spacing.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n      case \"left\":\r\n        styleLabel = {\r\n          marginRight: this.state.settings.label_style_spacing\r\n            ? this.state.settings.label_style_spacing.size +\r\n            this.state.settings.label_style_spacing.unit\r\n            : 2 + \"px\"\r\n        };\r\n        classLabel = \"altrp-field-label-container-left\";\r\n        break;\r\n      case \"absolute\":\r\n        styleLabel = {\r\n          position: \"absolute\",\r\n          zIndex: 2\r\n        };\r\n        classLabel = \"\";\r\n        break;\r\n    }\r\n\r\n    if (this.state.settings.content_label) {\r\n      label = (\r\n        <div\r\n          className={\"altrp-field-label-container \" + classLabel}\r\n          style={styleLabel}\r\n        >\r\n          <label\r\n            className={`altrp-field-label ${this.state.settings.content_required\r\n              ? \"altrp-field-label--required\"\r\n              : \"\"\r\n              }`}\r\n          >\r\n            {this.state.settings.content_label}\r\n          </label>\r\n          {label_icon && label_icon.assetType && (\r\n            <span className=\"altrp-label-icon\">\r\n              {renderAssetIcon(label_icon)}\r\n            </span>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      label = null;\r\n    }\r\n\r\n    let autocomplete = \"off\";\r\n    if (this.state.settings.content_autocomplete) {\r\n      autocomplete = \"on\";\r\n    } else {\r\n      autocomplete = \"off\";\r\n    }\r\n\r\n    const isClearable = this.state.settings.content_clearable;\r\n\r\n    const input = (\r\n      <div className=\"altrp-input-wrapper\">\r\n        <AltrpInput\r\n          type=\"text\"\r\n          name={this.getName()}\r\n          value={value || \"\"}\r\n          element={this.props.element}\r\n          readOnly={content_readonly}\r\n          autoComplete={autocomplete}\r\n          placeholder={this.state.settings.content_placeholder}\r\n          className={\r\n            \"altrp-field \" + this.state.settings.position_css_classes\r\n          }\r\n          settings={this.props.element.getSettings()}\r\n          onKeyDown={this.handleEnter}\r\n          onChange={this.onChange}\r\n          onBlur={this.onBlur}\r\n          onFocus={this.onFocus}\r\n          id={this.state.settings.position_css_id}\r\n        />\r\n        {isClearable && (\r\n          <button\r\n            className=\"input-clear-btn\"\r\n            onClick={() => this.setState({ value: this.defaultValue })}\r\n          >\r\n            ✖\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <AltrpFieldContainer\r\n        settings={settings}\r\n        className=\"altrp-field-container \"\r\n      >\r\n        {content_label_position_type === \"top\" ? label : \"\"}\r\n        {content_label_position_type === \"left\" ? label : \"\"}\r\n        {content_label_position_type === \"right\" ? label : \"\"}\r\n        {content_label_position_type === \"absolute\" ? label : \"\"}\r\n        {/* .altrp-field-label-container */}\r\n        {input}\r\n        {content_label_position_type === \"bottom\" ? label : \"\"}\r\n      </AltrpFieldContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputTextWidget;\r\n","/**\n * Set a value by a dot path.\n * @param obj The object to evaluate.\n * @param prop The path to be set.\n * @param value The value to set.\n */\nfunction set(obj, prop, value) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tconst setPropImmutableRec = (obj, prop, value, i) => {\n\t\tlet clone, head = prop[i];\n\n\t\tif (prop.length > i) {\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\thead = getArrayIndex(head, obj);\n\t\t\t\tclone = obj.slice();\n\t\t\t} else {\n\t\t\t\tclone = Object.assign({}, obj);\n\t\t\t}\n\t\t\tclone[head] = setPropImmutableRec(obj[head] !== undefined ? obj[head] : {}, prop, value, i + 1);\n\t\t\treturn clone;\n\t\t}\n\n\t\treturn typeof value === 'function' ? value(obj) : value;\n\t};\n\n\treturn setPropImmutableRec(obj, prop, value, 0);\n}\n\n/**\n * Get a value by a dot path.\n * @param obj The object to evaluate.\n * @param prop The path to value that should be returned.\n * @param [value] The default value that should be returned when the target doesn't exist.\n */\nfunction get(obj, prop, value) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tfor (var i = 0; i < prop.length; i++) {\n\t\tif (obj === null || typeof obj !== 'object') {\n\t\t\treturn value;\n\t\t}\n\t\tlet head = prop[i];\n\t\tif (Array.isArray(obj) && head === '$end') {\n\t\t\thead = obj.length - 1;\n\t\t}\n\t\tobj = obj[head];\n\t}\n\n\tif (typeof obj === 'undefined') {\n\t\treturn value;\n\t}\n\n\treturn obj;\n}\n\n/**\n * Delete a property by a dot path.\n * If target container is an object, the property is deleted.\n * If target container is an array, the index is deleted.\n * If target container is undefined, nothing is deleted.\n * @param obj The object to evaluate.\n * @param prop The path to the property or index that should be deleted.\n */\nfunction _delete(obj, prop) {\n\tprop = typeof prop === 'number' ? propToArray(prop.toString()) : typeof prop === 'string' ? propToArray(prop) : prop;\n\n\tconst deletePropImmutableRec = (obj, prop, i) => {\n\t\tlet clone, head = prop[i];\n\n\t\tif (obj === null || typeof obj !== 'object' ||\n\t\t\t!Array.isArray(obj) && obj[head] === undefined) {\n\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (prop.length - 1 > i) {\n\t\t\tif (Array.isArray(obj)) {\n\t\t\t\thead = getArrayIndex(head, obj);\n\t\t\t\tclone = obj.slice();\n\t\t\t} else {\n\t\t\t\tclone = Object.assign({}, obj);\n\t\t\t}\n\n\t\t\tclone[head] = deletePropImmutableRec(obj[head], prop, i + 1);\n\t\t\treturn clone;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\thead = getArrayIndex(head, obj);\n\t\t\tclone = [].concat(obj.slice(0, head), obj.slice(head + 1));\n\t\t} else {\n\t\t\tclone = Object.assign({}, obj);\n\t\t\tdelete clone[head];\n\t\t}\n\n\t\treturn clone;\n\t};\n\n\treturn deletePropImmutableRec(obj, prop, 0);\n}\n\n/**\n * Toggles a value.  The target value is evaluated using Boolean(currentValue).  The result will always be a JSON boolean.\n * Be careful with strings as target value, as \"true\" and \"false\" will toggle to false, but \"0\" will toggle to true.\n * Here is what Javascript considers false:  0, -0, null, false, NaN, undefined, and the empty string (\"\")\n * @param obj The object to evaluate.\n * @param prop The path to the value.\n */\nfunction toggle(obj, prop) {\n\tconst curVal = get(obj, prop);\n\treturn set(obj, prop, !Boolean(curVal));\n}\n\n/**\n * Merges a value.  The target value must be an object, array, null, or undefined.\n * If target is an object, Object.assign({}, target, param) is used.\n * If target an array, target.concat(param) is used.\n * If target is null or undefined, the value is simply set.\n * @param obj The object to evaluate.\n * @param prop The path to the value.\n * @param val The value to merge into the target value.\n */\nfunction merge(obj, prop, val) {\n\tconst curVal = get(obj, prop);\n\tif (typeof curVal === 'object') {\n\t\tif (Array.isArray(curVal)) {\n\t\t\treturn set(obj, prop, curVal.concat(val));\n\t\t} else if (curVal === null) {\n\t\t\treturn set(obj, prop, val);\n\t\t}\n\t\telse {\n\t\t\tlet merged = Object.assign({}, curVal, val);\n\t\t\treturn set(obj, prop, merged);\n\t\t}\n\t} else if (typeof curVal === 'undefined') {\n\t\treturn set(obj, prop, val);\n\t}\n\telse {\n\t\treturn obj;\n\t}\n}\n\nfunction getArrayIndex(head, obj) {\n\tif (head === '$end') {\n\t\thead = Math.max(obj.length - 1, 0);\n\t}\n\tif (!/^\\+?\\d+$/.test(head)) {\n\t\tthrow new Error(`Array index '${head}' has to be an integer`);\n\t}\n\treturn parseInt(head);\n}\n\nfunction propToArray(prop) {\n\treturn prop.split('.').reduce((ret, el, index, list) => {\n\t\tconst last = index > 0 && list[index - 1];\n\t\tif (last && /(?:^|[^\\\\])\\\\$/.test(last)) {\n\t\t\tconst prev = ret.pop();\n\t\t\tret.push(prev.slice(0, -1) + '.' + el);\n\t\t} else {\n\t\t\tret.push(el);\n\t\t}\n\t\treturn ret;\n\t}, []);\n}\n\nmodule.exports = {\n\tset,\n\tget,\n\tdelete: _delete,\n\ttoggle,\n\tmerge\n};\n"],"sourceRoot":""}